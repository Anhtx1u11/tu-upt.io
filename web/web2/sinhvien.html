<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8" />
<title>ƒêi·ªÉm Danh</title>
    <style>
      .foote{
        margin: auto;
        width: 400px;
        text-align: center;
        background-color: aqua;
        color: black;
        border-radius: 30px;
        font-weight: bold;
      }
      table{
        width: 50%;
        margin: auto;
      }
      th, td{
        padding: 20px;
        text-align: center;
      }
      th{
        background-color: burlywood;
      }
      .diemdanh{
        background-color: cadetblue;
        border-radius: 35px;
      }
      .diemdanh:hover{
        background-color: green;
      }
      .box-noti{
        background-color: aqua;
        color: black;
        border-radius: 30px;
        width: 400px;
        
        margin: auto;
        display: none;
        text-align: center;
      }
    
    </style>
    <body>  
        <div class="foote">
            <h3>Qu·∫£n L√≠ ƒêi·ªÉm Danh</h3>
        </div>
        <button>üë§ H·ªì S∆°</button>

        <div style="text-align: center; font-weight: bold;">
            <h2>Ch√†o Sinh Vi√™n: </h2>
        </div>

        <div style="text-align: center; color: black;">
            <p>L·ªãch H·ªçc H√¥m Nay</p>
        </div>
        
        <table border ="2">
            <tr>
                <th>M√¥n H·ªçc</th>
                <th>ƒêi·ªÉm Danh</th>
                <th>S·ªë L·∫ßn ƒêi·ªÉm Danh</th>
            </tr>
            <tr>
                <td>L·∫≠p Tr√¨nh</td>
                <td> <button class = "diemdanh" onclick="diemdanh()">ƒêi·ªÉm Danh Ngay</button> </td>
                <td id="sodiemdanh">0/30</td>
            </tr>
        </table>
        <div class ="box-noti" id="noti">
           
        </div>
    </body>
  <script>
let diemdanh_1 = false;

// L·∫•y IP
fetch("https://api.ipify.org/?format=json")
  .then(getip => getip.json())
  .then(data => {
    if (data.ip === "14.234.99.138") {
      diemdanh_1 = true;
    }
  });

// H√†m ƒëi·ªÉm danh
function diemdanh() {
  const noti = document.getElementById("noti");
  noti.style.display = "block";

  if (diemdanh_1) {
    fetch("diemdanh.php")
      .then(res => res.text())
      .then(data => {
        if (data.includes("/")) {
          document.getElementById("sodiemdanh").innerText = data;
          noti.innerText = "‚úÖ ƒêi·ªÉm danh th√†nh c√¥ng!";
        } else {
          noti.innerText = "‚ö† " + data;
        }
      })
      .catch(err => {
        noti.innerText = "L·ªói h·ªá th·ªëng!";
        console.error(err);
      });
  } else {
    noti.innerText = "‚ùå B·∫°n kh√¥ng c√≥ quy·ªÅn ƒëi·ªÉm danh t·ª´ IP n√†y.";
  }
}
</script>

</html>

