<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trang chính | Edumanuni</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
    }
    .header {
      background-color: #d4e6f1;
      padding: 10px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
    }
    .header img {
      height: 50px;
      margin-right: 10px;
    }
    .header-title {
      font-size: 18px;
      font-weight: bold;
      color: #003366;
    }
    .header-title span {
      color: #0077c8;
    }
    .menu {
      background-color: #0066b3;
      display: flex;
      justify-content: center;
    }
    .menu-item {
      background-color: #fdd67b;
      font-weight: bold;
      padding: 10px 20px;
      box-shadow: 2px 2px 4px #ccc;
      border-radius: 0 0 8px 8px;
      margin: 0 5px;
      cursor: pointer;
    }
    .content {
      max-width: 960px;
      margin: 30px auto;
      background-color: #fff;
      padding: 20px;
      border: 1px solid #ddd;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }
    .content h2 {
      background-color: #fdd67b;
      padding: 10px;
      font-size: 20px;
    }
    .student-info {
      font-size: 18px;
      line-height: 1.6;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #000;
      padding: 6px;
      text-align: center;
    }
    th {
      background-color: #0070c0;
      color: #fff;
    }
    td:nth-child(4) {
      background-color: #eaf1dd;
    }
    td:nth-child(9), td:nth-child(10) {
      background-color: #d9ead3;
    }
    td:nth-child(11), td:nth-child(12) {
      background-color: #fce5cd;
    }
    .footer {
      background-color: #035e96;
      color: white;
      text-align: center;
      padding: 12px 20px;
      font-size: 14px;
    }
    .footer-bottom {
      background-color: #0072c6;
      color: white;
      padding: 6px;
      text-align: center;
    }
    .footer-bottom span {
      color: #ffd700;
      font-weight: bold;
    }
  </style>
    <script src="students.js"></script>
</head>
<body>
  <div class="header">
    <img src="logo-UPT-768x768.png" alt="Logo" />
    <div class="header-title">
      HỆ THỐNG QUẢN LÝ ĐÀO TẠO <span>EDUMANUNI</span><br />
      TRANG THÔNG TIN ĐÀO TẠO TÍN CHỈ
    </div>
  </div>

  <div class="menu">
    <div class="menu-item">TRANG CHỦ</div>
    <div class="menu-item">THÔNG TIN CÁ NHÂN</div>
    <div class="menu-item" onclick="logout()">ĐĂNG XUẤT</div>
  </div>

  <div class="content">
    <h2>Thông tin sinh viên</h2>
    <div class="student-info">
      <p><strong>Mã số sinh viên:</strong> <span id="student-id">Đang tải...</span></p>
      <p><strong>Họ và tên:</strong> <span id="student-name">Đang tải...</span></p>
    </div>

    <h2>Bảng điểm học kỳ 1</h2>
    <table>
      <thead>
        <tr>
          <th rowspan="2">Stt</th>
          <th rowspan="2">Lớp</th>
          <th rowspan="2">Học phần</th>
          <th rowspan="2">Số TC</th>
          <th rowspan="2">CC</th>
          <th rowspan="2">GK</th>
          <th colspan="2">Thi CK</th>
          <th colspan="2">ĐHP</th>
          <th rowspan="2">Công thức</th>
        </tr>
        <tr>
          <th>L1</th>
          <th>L2</th>
          <th>Hệ 10</th>
          <th>Hệ 4</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>1</td><td><b>K16THO1</b></td><td>Tiếng Anh 1</td><td>3</td><td id="cc1_1"></td><td id="gk1_1"></td><td id="ck1_1_l1"></td><td id="ck1_1_l2"></td><td id="dhp10_1_1"></td><td id="dhp4_1_1"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>2</td><td><b>K16THO1</b></td><td>Nhập môn CNTT</td><td>3</td><td id="cc1_2"></td><td id="gk1_2"></td><td id="ck1_2_l1"></td><td id="ck1_2_l2"></td><td id="dhp10_1_2"></td><td id="dhp4_1_2"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>3</td><td><b>K16THO1</b></td><td>Toán cao cấp</td><td>3</td><td id="cc1_3"></td><td id="gk1_3"></td><td id="ck1_3_l1"></td><td id="ck1_3_l2"></td><td id="dhp10_1_3"></td><td id="dhp4_1_3"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>4</td><td><b>K16THO1</b></td><td>Giáo dục thể chất 1</td><td>2</td><td id="cc1_4"></td><td id="gk1_4"></td><td id="ck1_4_l1"></td><td id="ck1_4_l2"></td><td id="dhp10_1_4"></td><td id="dhp4_1_4"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>5</td><td><b>K16THO1</b></td><td>Triết học Mác - Lê nin</td><td>3</td><td id="cc1_5"></td><td id="gk1_5"></td><td id="ck1_5_l1"></td><td id="ck1_5_l2"></td><td id="dhp10_1_5"></td><td id="dhp4_1_5"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
      </tbody>
    </table>

    <h2>Bảng điểm học kỳ 2</h2>
    <table>
      <thead>
        <tr>
          <th rowspan="2">Stt</th>
          <th rowspan="2">Lớp</th>
          <th rowspan="2">Học phần</th>
          <th rowspan="2">Số TC</th>
          <th rowspan="2">CC</th>
          <th rowspan="2">GK</th>
          <th colspan="2">Thi CK</th>
          <th colspan="2">ĐHP</th>
          <th rowspan="2">Công thức</th>
        </tr>
        <tr>
          <th>L1</th>
          <th>L2</th>
          <th>Hệ 10</th>
          <th>Hệ 4</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>1</td><td><b>K16THO1</b></td><td>Tiếng Anh 2</td><td>3</td><td id="cc2_1"></td><td id="gk2_1"></td><td id="ck2_1_l1"></td><td id="ck2_1_l2"></td><td id="dhp10_2_1"></td><td id="dhp4_2_1"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>2</td><td><b>K16THO1</b></td><td>Lập trình căn bản</td><td>3</td><td id="cc2_2"></td><td id="gk2_2"></td><td id="ck2_2_l1"></td><td id="ck2_2_l2"></td><td id="dhp10_2_2"></td><td id="dhp4_2_2"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>3</td><td><b>K16THO1</b></td><td>Pháp luật đại cương</td><td>3</td><td id="cc2_3"></td><td id="gk2_3"></td><td id="ck2_3_l1"></td><td id="ck2_3_l2"></td><td id="dhp10_2_3"></td><td id="dhp4_2_3"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>4</td><td><b>K16THO1</b></td><td>Kiến trúc máy tính</td><td>2</td><td id="cc2_4"></td><td id="gk2_4"></td><td id="ck2_4_l1"></td><td id="ck2_4_l2"></td><td id="dhp10_2_4"></td><td id="dhp4_2_4"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
        <tr><td>5</td><td><b>K16THO1</b></td><td>Kinh tế chính trị Mác - Lê nin</td><td>3</td><td id="cc2_5"></td><td id="gk2_5"></td><td id="ck2_5_l1"></td><td id="ck2_5_l2"></td><td id="dhp10_2_5"></td><td id="dhp4_2_5"></td><td>[CC]*0.1+[GK]*0.3+[CK]*0.6</td></tr>
      </tbody>
    </table>
  </div>

  <div class="footer">
    <strong>Bản quyền: Trường Đại học Phan Thiết</strong><br />
    Địa chỉ: 225 Nguyễn Thông, Phú Hài, Phan Thiết, Bình Thuận |
    Điện thoại: (+84.0252)2461373 - 2461372 - 6283838 |
    Email: dhphanthiet@upt.edu.vn
  </div>
  <div class="footer-bottom">
    Design by <span>EduSoft</span>
  </div>

  <!-- PHẦN TRÊN KHÔNG THAY ĐỔI (giữ nguyên toàn bộ HTML) -->
<!-- ... -->

<script>
  function logout() {
    localStorage.removeItem("mssv");
    for (let hk = 1; hk <= 2; hk++) {
      for (let i = 1; i <= 5; i++) {
        localStorage.removeItem(`grades_${hk}_${i}`);
      }
    }
    window.location.href = "login.html";
  }

  document.getElementById("student-id").textContent = localStorage.getItem("mssv") || "Không tìm thấy";
  document.getElementById("student-name").textContent = "Nguyễn Văn A";

  function randomPoint(min = 5, max = 10) {
    return +(Math.random() * (max - min) + min).toFixed(1);
  }

  function calculateGradeSystem10(cc, gk, ck) {
    return +(cc * 0.1 + gk * 0.3 + ck * 0.6).toFixed(1);
  }

  function convertTo4Scale(grade10) {
    if (grade10 >= 8.5) return 4.0;
    if (grade10 >= 7.0) return 3.0;
    if (grade10 >= 5.5) return 2.0;
    if (grade10 >= 4.0) return 1.0;
    return 0.0;
  }

  function saveGrades(hk, index, cc, gk, ck, dhp10, dhp4) {
    const key = `grades_${hk}_${index}`;
    localStorage.setItem(key, JSON.stringify({ cc, gk, ck, dhp10, dhp4 }));
  }

  function getSavedGrades(hk, index) {
    const key = `grades_${hk}_${index}`;
    const data = localStorage.getItem(key);
    return data ? JSON.parse(data) : null;
  }

  function fillRandomGrades(hk, index) {
    let saved = getSavedGrades(hk, index);
    if (!saved) {
      const cc = randomPoint();
      const gk = randomPoint();
      const ck = randomPoint();
      const dhp10 = calculateGradeSystem10(cc, gk, ck);
      const dhp4 = convertTo4Scale(dhp10);
      saveGrades(hk, index, cc, gk, ck, dhp10, dhp4);
      saved = { cc, gk, ck, dhp10, dhp4 };
    }

    document.getElementById(`cc${hk}_${index}`).textContent = saved.cc;
    document.getElementById(`gk${hk}_${index}`).textContent = saved.gk;

    // Danh sách các môn học cần ẩn điểm ở học kỳ 2
    const hiddenCourses = {
      2: [1, 2, 4] // Tiếng Anh 2, Lập trình căn bản, Kiến trúc máy tính
    };
    const shouldHide = hiddenCourses[hk]?.includes(index);

    document.getElementById(`ck${hk}_${index}_l1`).textContent = shouldHide ? '' : saved.ck;
    document.getElementById(`ck${hk}_${index}_l2`).textContent = shouldHide ? '' : saved.ck;
    document.getElementById(`dhp10_${hk}_${index}`).textContent = shouldHide ? '' : saved.dhp10;
    document.getElementById(`dhp4_${hk}_${index}`).textContent = shouldHide ? '' : saved.dhp4;
  }

  function generateAllGrades() {
    for (let i = 1; i <= 5; i++) {
      fillRandomGrades(1, i);
      fillRandomGrades(2, i);
    }
  }

  window.onload = generateAllGrades;
</script>

</body>
</html>
