<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life, Pre-Intermediate, Unit 6 Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 800px;
            width: 100%;
        }
        .quiz-container {
            background: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: #1d4ed8;
            text-align: center;
            margin-top: 0;
        }
        .instructions {
            font-size: 1.1em;
            margin-bottom: 20px;
            line-height: 1.5;
            text-align: center;
        }
        ol {
            padding-left: 0;
            list-style-position: inside;
        }
        
        /* --- Styles for Fill in the blank & Word Box --- */
        .word-box {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 15px;
            background-color: #eef2ff;
            border: 1px solid #c7d2fe;
            border-radius: 8px;
            margin-bottom: 25px;
            justify-content: center;
        }
        .word-box code {
            background-color: #ffffff;
            padding: 4px 8px;
            border-radius: 5px;
            font-size: 1em;
            font-weight: 500;
        }
        .fill-in-text {
            font-size: 1.2em;
            line-height: 2.5;
        }
        .fill-in-text ol {
            list-style-type: decimal;
            padding-left: 20px;
        }
        .fill-in-text li {
            margin-bottom: 12px;
        }
        .fill-in-text input {
            width: 140px;
            border: none;
            border-bottom: 2px solid #9ca3af;
            font-size: 0.9em;
            font-family: inherit;
            text-align: center;
            margin: 0 5px;
            padding: 2px 5px;
            transition: border-color 0.3s, box-shadow 0.3s;
            vertical-align: middle;
        }
        .fill-in-text input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 1px 0 #4f46e5;
        }
        .fill-in-text .verb-in-bracket {
            font-family: monospace;
            color: #555;
            font-size: 0.9em;
        }
        .fill-in-text input.correct {
            border-color: #16a34a;
            background-color: #f0fdf4;
        }
        .fill-in-text input.incorrect {
            border-color: #dc2626;
            background-color: #fef2f2;
        }

        /* --- Styles for Binary Choice --- */
        .binary-choice-list li { list-style-type: none; margin-bottom: 15px; font-size: 1.1em; line-height: 1.6;}
        .choice {
            font-weight: bold;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .choice:hover { background-color: #eef2ff; }
        .choice.selected { background-color: #c7d2fe; }
        .choice.correct-choice { background-color: #dcfce7; color: #15803d; text-decoration: none !important; }
        .choice.incorrect-choice { background-color: #fee2e2; color: #b91c1c; text-decoration: line-through;}
        
        /* --- General Styles --- */
        .check-button { display: block; width: 100%; padding: 12px 20px; font-size: 1.1em; font-weight: bold; color: #fff; background-color: #2563eb; border: none; border-radius: 8px; cursor: pointer; margin-top: 30px; transition: background-color 0.3s; }
        .check-button:hover { background-color: #1d4ed8; }
        
        /* --- Styles for Mode Selection --- */
        .hidden { display: none !important; }
        .mode-buttons { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
        #mode-shuffle { background-color: #f97316; }
        #mode-shuffle:hover { background-color: #ea580c; }
    </style>
</head>
<body>

<div id="mode-selection" class="container">
    <div class="quiz-container">
        <h1>Ch·ªçn Ch·∫ø ƒë·ªô L√†m b√†i</h1>
        <p class="instructions">B·∫°n mu·ªën l√†m b√†i theo th·ª© t·ª± g·ªëc hay x√°o tr·ªôn c√¢u h·ªèi v√† ƒë√°p √°n?</p>
        <div class="mode-buttons">
            <button id="mode-normal" class="check-button">üöÄ Ch·∫ø ƒë·ªô Th∆∞·ªùng</button>
            <button id="mode-shuffle" class="check-button">üîÄ Ch·∫ø ƒë·ªô X√°o tr·ªôn</button>
        </div>
    </div>
</div>

<div class="container hidden">
    <h1>Life, Pre-Intermediate, Unit 6 Test</h1>

    <div class="quiz-container">
        <h2>Vocabulary 1: Verb Collocations</h2>
        <p class="instructions"><b>Complete the sentences with the verbs in the box. You can use the verbs more than once.</b></p>
        <div class="word-box">
            <code>ban</code> <code>get</code> <code>go</code> <code>leave</code> <code>make</code> <code>play</code> <code>ride</code> <code>start</code> <code>take</code>
        </div>
        <div class="fill-in-text">
            <ol>
                <li><b>0.</b> It's time to <u><b>get</b></u> ready for the party.</li>
                <li><b>1.</b> My sister can <input type="text" id="u6p1_ans1" data-answer="play"> the violin by ear.</li>
                <li><b>2.</b> Some of these ancient stories <input type="text" id="u6p1_ans2" data-answer="go"> back hundreds of years.</li>
                <li><b>3.</b> The government wants to <input type="text" id="u6p1_ans3" data-answer="ban"> fireworks because they are dangerous. In future, they won't be allowed.</li>
                <li><b>4.</b> We should <input type="text" id="u6p1_ans4" data-answer="get"> together soon and have dinner.</li>
                <li><b>5.</b> Now they're married, do you think they'll <input type="text" id="u6p1_ans5" data-answer="start"> a family?</li>
                <li><b>6.</b> I'd like to <input type="text" id="u6p1_ans6" data-answer="go"> to university when I leave school.</li>
                <li><b>7.</b> I don't remember when I first learned to <input type="text" id="u6p1_ans7" data-answer="ride"> a bicycle ‚Äì when I was five or six, perhaps.</li>
                <li><b>8.</b> When did you <input type="text" id="u6p1_ans8" data-answer="get"> married?</li>
                <li><b>9.</b> In the UK, young people often <input type="text" id="u6p1_ans9" data-answer="leave"> home and find their own place to live when they are eighteen or nineteen.</li>
                <li><b>10.</b> When did you <input type="text" id="u6p1_ans10" data-answer="get"> back from your trip to Paris?</li>
            </ol>
        </div>
        <button id="check-button-u6p1" class="check-button">Ki·ªÉm tra Vocabulary 1</button>
    </div>

    <div class="quiz-container">
        <h2>Grammar 3: Future Forms</h2>
        <p class="instructions"><b>Choose the correct option to complete the sentences.</b></p>
        <ol class="binary-choice-list">
            <li><b>0.</b> Don't worry about your driving test! I'm sure <span class="choice correct-choice">you'll pass</span> / <span class="choice">you're passing</span>.</li>
            <li data-question="u6p3-1"><b>1.</b> <span class="choice">I won't come</span> / <span class="choice" data-answer="true">I'm not coming</span> on Friday, sorry. I have an appointment at the dentist's.</li>
            <li data-question="u6p3-2"><b>2.</b> Are you feeling sleepy? OK, <span class="choice">I'm going to</span> / <span class="choice" data-answer="true">I'll</span> open the window.</li>
            <li data-question="u6p3-3"><b>3.</b> Look at the traffic! <span class="choice" data-answer="true">We're going to be</span> / <span class="choice">We're being</span> late for school.</li>
            <li data-question="u6p3-4"><b>4.</b> Don't leave your laptops in the classroom! Someone <span class="choice">is going to steal</span> / <span class="choice" data-answer="true">will steal</span> them.</li>
            <li data-question="u6p3-5"><b>5.</b> Good morning and welcome to Sackville College. In this talk <span class="choice">I'm telling</span> / <span class="choice" data-answer="true">I'm going to tell</span> you about ...</li>
            <li data-question="u6p3-6"><b>6.</b> I'm sorry. I forgot your drink. <span class="choice">I'm going to go</span> / <span class="choice" data-answer="true">I'll go</span> and get it now.</li>
            <li data-question="u6p3-7"><b>7.</b> I don't think <span class="choice" data-answer="true">he'll</span> / <span class="choice">he won't</span> go to the party.</li>
            <li data-question="u6p3-8"><b>8.</b> 'Are you going to the cinema tomorrow evening?' 'Yes,I <span class="choice" data-answer="true">am</span> / <span class="choice" >will</span>.'</li>
            <li data-question="u6p3-9"><b>9.</b> <span class="choice">I'll play</span> / <span class="choice" data-answer="true">I'm playing</span> tennis on Friday at three, so I can't come on the picnic.</li>
            <li data-question="u6p3-10"><b>10.</b> I love Susie. <span class="choice">I'm marrying</span> / <span class="choice" data-answer="true">I'm going to marry</span> her one day.</li>
        </ol>
        <button id="check-button-u6p3" class="check-button">Ki·ªÉm tra Grammar 3</button>
    </div>
    
    <div class="quiz-container">
        <h2>Grammar 4: Verb Forms</h2>
        <p class="instructions"><b>Complete the text with the correct form of the verb in brackets.</b></p>
        <div class="fill-in-text">
            When I was in my early twenties, I had to (0) <u><b>choose</b></u> (choose) between getting married and going abroad (1)<input type="text" id="u6p4_ans1" data-answer="to work"> (work). My girlfriend wanted (2)<input type="text" id="u6p4_ans2" data-answer="to get"> (get) married, but I enjoyed (3)<input type="text" id="u6p4_ans3" data-answer="being"> (be) single and, in my opinion, it was important (4)<input type="text" id="u6p4_ans4" data-answer="to see"> (see) the world before starting a family. 'Let's (5)<input type="text" id="u6p4_ans5" data-answer="go"> (go) away together,' I said. 'We should (6)<input type="text" id="u6p4_ans6" data-answer="make"> (make) some great memories, then we'll be ready (7)<input type="text" id="u6p4_ans7" data-answer="to buy"> (buy) a house.' She wasn't interested in (8)<input type="text" id="u6p4_ans8" data-answer="travelling"> (travel) but, in the end, she agreed (9)<input type="text" id="u6p4_ans9" data-answer="to wait"> (wait) for me for a year. Six months later, I was back home. It was difficult (10)<input type="text" id="u6p4_ans10" data-answer="spending"> (spend) so much time away from her. Now, we're married and we have three children.
        </div>
        <button id="check-button-u6p4" class="check-button">Ki·ªÉm tra Grammar 4</button>
    </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- DOM Elements ---
    const modeSelection = document.getElementById('mode-selection');
    const quizContainer = document.querySelector('.container:not(#mode-selection)');
    const normalModeBtn = document.getElementById('mode-normal');
    const shuffleModeBtn = document.getElementById('mode-shuffle');

    // --- Shuffle Functions ---
    function shuffleChildren(parent) {
        if (!parent) return;
        let children = Array.from(parent.children);
        // Start from 1 to skip the example (item 0)
        for (let i = children.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * i) + 1;
            [children[i], children[j]] = [children[j], children[i]];
        }
        parent.innerHTML = ''; 
        children.forEach(child => parent.appendChild(child));
    }

    // --- Quiz Start Logic ---
    function startQuiz(mode) {
        modeSelection.classList.add('hidden');
        quizContainer.classList.remove('hidden');

        if (mode === 'shuffle') {
            // Part 1: Shuffle words in the box and question order
            shuffleChildren(document.querySelector('#check-button-u6p1').parentElement.querySelector('.word-box'));
            shuffleChildren(document.querySelector('#check-button-u6p1').parentElement.querySelector('.fill-in-text ol'));
            
            // Part 3: Shuffle question order
            shuffleChildren(document.querySelector('.binary-choice-list'));
        }
    }

    normalModeBtn.addEventListener('click', () => startQuiz('normal'));
    shuffleModeBtn.addEventListener('click', () => startQuiz('shuffle'));

    // =================================================================
    // --- CHECKING LOGIC ---
    // =================================================================

    // --- Generic Function for Fill-in-the-Blank Sections ---
    function checkFillInBlank(partIdPrefix) {
        for (let i = 1; i <= 10; i++) {
            const input = document.getElementById(`${partIdPrefix}_ans${i}`);
            if (input) {
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.getAttribute('data-answer').toLowerCase();
                input.classList.remove('correct', 'incorrect');
                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                } else {
                    input.classList.add('incorrect');
                }
            }
        }
    }

    document.getElementById('check-button-u6p1').addEventListener('click', () => checkFillInBlank('u6p1'));
    document.getElementById('check-button-u6p4').addEventListener('click', () => checkFillInBlank('u6p4'));

    // --- Script for Grammar 3 (Binary Choice) ---
    const choiceSpans = document.querySelectorAll('.choice');
    choiceSpans.forEach(span => {
        span.addEventListener('click', function() {
            const questionGroup = this.parentElement.getAttribute('data-question');
            if (questionGroup) {
                document.querySelectorAll(`[data-question="${questionGroup}"] .choice`).forEach(s => s.classList.remove('selected'));
                this.classList.add('selected');
            }
        });
    });

    document.getElementById('check-button-u6p3').addEventListener('click', function() {
        const questions = document.querySelectorAll('.binary-choice-list > li[data-question]');
        questions.forEach(question => {
            const choices = question.querySelectorAll('.choice');
            choices.forEach(choice => {
                choice.classList.remove('correct-choice', 'incorrect-choice');
                if (choice.getAttribute('data-answer') === 'true') {
                    choice.classList.add('correct-choice');
                }
            });
            const selectedChoice = question.querySelector('.choice.selected');
            if (selectedChoice && selectedChoice.getAttribute('data-answer') !== 'true') {
                selectedChoice.classList.add('incorrect-choice');
            }
        });
    });
});
</script>

</body>

</html>
